(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1470:function(e,t,n){"use strict";(function(e){var r=n(30),o=(n(25),n(589),n(86),n(20)),c=(n(33),n(34),n(14),n(1)),l=n(348),d=n.n(l),m=n(9),v=n.n(m),f=n(1512);t.a={components:{VInput:f.a},data:function(){return{inputCount:2,inputs:{},inputsJson:{},inputsHex:{},initmnemonics:[],client:null,goalAmount:3e6,feeSatoshis:1e3,toAddress:"yPeRRTJg44yBdDmhvLSVvdUyc3DyA1Expw",redeemTxRaw:null,input1:"",input2:"",mnemonic:"shock immense hand zoo mean seat vehicle artwork element month story water",redeemResult:""}},computed:{redeemTx:function(){return this.redeemTxRaw}},created:function(){console.log("this.$route :>> ",this.$route);this.initmnemonics.push("luggage vacuum solution element rigid have provide enough defense champion frog camera");this.initmnemonics.push("essay love suffer inquiry buffalo advance glue boil arrive glove clutch oyster"),this.redeemTxRaw=new v.a.Transaction},methods:{isRedeemTxFullySigned:function(){var e;try{e=this.redeemTxRaw.isFullySigned()}catch(t){e=t.message}return e},verifyRedeemTxOutput:function(){var e;try{e=v.a.Script.Interpreter().verify(this.redeemTxRaw.outputs[0].script)}catch(t){e=t.message}return e},verifyInput:function(t){var n;try{var r=JSON.parse(e.from(this.inputsHex[t],"hex").toString()),input=v.a.Transaction.Input(r);n=v.a.Script.Interpreter().verify(input.script)}catch(e){n=e.message}return n},reload:function(){this.$router.push("/0x81/?inputCount="+this.inputCount)},setTxx:function(t,n){console.log("setinput, vidx,tx :>> ",t,n),c.a.set(this.inputs,t,n),c.a.set(this.inputsJson,t,JSON.stringify(n.toJSON())),c.a.set(this.inputsHex,t,e.from(JSON.stringify(n.inputs[0].toJSON())).toString("hex"))},useTx:function(e){var t;this.redeemTxRaw=this.inputs[e],t=v.a.Script.Interpreter().verify(this.redeemTxRaw.inputs[0].script),console.log("verification :>> ",t),t=v.a.Script.Interpreter().verify(this.redeemTxRaw.outputs[0].script),console.log("verification :>> ",t)},addInputDirect:function(e){this.redeemTxRaw.addInput(this.inputs[e].inputs[0])},addInputHex:function(t){var n;console.log("      const in2 = Dashcore.Transaction.Input( :>> ",JSON.parse(e.from(this.inputsHex[t],"hex").toString()));var r=v.a.Transaction.Input(JSON.parse(e.from(this.inputsHex[t],"hex").toString()));n=v.a.Script.Interpreter().verify(r.script),console.log("in2 verification :>> ",n),this.redeemTxRaw.addInput(r),n=v.a.Script.Interpreter().verify(this.redeemTxRaw.inputs[0].script),console.log("verification :>> ",n),n=v.a.Script.Interpreter().verify(this.redeemTxRaw.inputs[1].script),console.log("verification :>> ",n),n=v.a.Script.Interpreter().verify(this.redeemTxRaw.outputs[0].script),console.log("verification :>> ",n)},broadcastRedeemTx:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connect();case 2:return t.prev=2,t.next=5,e.client.account.broadcastTransaction(e.redeemTxRaw);case 5:r=t.sent,console.log("redeemTxId :>> ",r),n=r,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n=t.t0.message;case 13:e.redeemResult=n;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},connect:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.mnemonic,e.isConnecting=!0,console.log("Initializing Dash.Client with mnemonic: ",n),o={passFakeAssetLockProofForTests:!1,dapiAddresses:void 0,wallet:void 0!==n?{mnemonic:n}:void 0},o=JSON.parse(JSON.stringify(o)),console.dir({clientOpts:o},{depth:100}),e.client&&e.client.disconnect(),e.client=new d.a.Client(o),console.log("client.wallet :>> ",e.client.wallet),Object.entries(e.client.getApps().apps).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],o=t[1];return console.log(n,o.contractId.toString())})),t.next=12,e.client.wallet.getAccount();case 12:e.client.account=t.sent,console.log("client connected, address",e.client.account.getUnusedAddress().address),console.log("init total Balance",e.client.account.getTotalBalance()),e.walletBalance=e.client.account.getTotalBalance(),e.isConnecting=!1;case 17:case"end":return t.stop()}}),t)})))()}}}}).call(this,n(0).Buffer)},1512:function(e,t,n){"use strict";var r=n(30),o=(n(25),n(589),n(33),n(34),n(14),n(86),n(20)),c=(n(135),n(348)),l=n.n(c),d=n(9),m=n.n(d),v={props:{vidx:{type:Number,default:0},goalAmount:{type:Number,default:3e6},feeSatoshis:{type:Number,default:1e3},toAddress:{type:String,default:""},initmnemonic:{default:"",type:String}},data:function(){return{mnemonic:"",walletBalance:-1,isConnecting:!1,isCreatingDenom:!1,client:null,pledgeFromTransaction:"",pledgeFromTransactionId:"",pledgeFromAddress:"",pledgeAmount:15e5}},created:function(){this.mnemonic=this.initmnemonic,this.connect(),this.loopRefreshBalance()},methods:{loopRefreshBalance:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.client&&e.client.account&&(e.walletBalance=e.client.account.getTotalBalance()),t.next=3,e.$sleep(1e3);case 3:e.loopRefreshBalance();case 4:case"end":return t.stop()}}),t)})))()},createPledgeDenom:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isCreatingDenom=!0,n=e.client.account.keyChain.HDPrivateKey.derive("m/9'/1'/4'/1'/1"),r=n.privateKey.toString(),e.pledgeFromAddress=n.publicKey.toAddress().toString(),o=e.client.account.createTransaction({recipients:[{recipient:e.pledgeFromAddress,satoshis:parseInt(e.pledgeAmount)}]}),e.pledgeFromTransaction=JSON.stringify(o.toJSON(),null," "),console.log("Broadcasting pledgeUtxo txs:"),t.next=9,e.client.account.broadcastTransaction(o);case 9:c=t.sent,console.log("transactionId :>> ",c),e.pledgeFromTransactionId=c,l={txId:c,outputIndex:0,address:e.pledgeFromAddress,script:o.outputs[0]._script,satoshis:o.outputs[0]._satoshis},console.log("pledgeUtxo :>> ",l),console.log("Pledge UTXO transaction successfully broadcast:","\nWallet:",e.client.wallet.exportWallet(),"\ntxId:",c,"\nfromAddress:",e.pledgeFromAddress),d=(new m.a.Transaction).from([l]).to(e.toAddress,e.goalAmount-e.feeSatoshis).sign([r],129),console.log("partially signed transaction :>> ",d),e.$emit("setTx",d),e.isCreatingDenom=!1;case 19:case"end":return t.stop()}}),t)})))()},connect:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.mnemonic,e.isConnecting=!0,console.log("Initializing Dash.Client with mnemonic: ",n),o={passFakeAssetLockProofForTests:!1,dapiAddresses:void 0,wallet:void 0!==n?{mnemonic:n}:void 0},o=JSON.parse(JSON.stringify(o)),console.dir({clientOpts:o},{depth:100}),e.client&&e.client.disconnect(),e.client=new l.a.Client(o),console.log("client.wallet :>> ",e.client.wallet),Object.entries(e.client.getApps().apps).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],o=t[1];return console.log(n,o.contractId.toString())})),t.next=12,e.client.wallet.getAccount();case 12:e.client.account=t.sent,console.log("client connected, address",e.client.account.getUnusedAddress().address),console.log("init total Balance",e.client.account.getTotalBalance()),e.walletBalance=e.client.account.getTotalBalance(),e.isConnecting=!1;case 17:case"end":return t.stop()}}),t)})))()}}},f=n(117),x=n(160),h=n.n(x),T=n(1460),_=n(1473),w=n(1471),y=n(1516),I=n(1511),S=n(1517),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-4",attrs:{outlined:""}},[n("v-card-title",[e._v("Input #"+e._s(e.vidx))]),e._v(" "),n("v-text-field",{attrs:{label:"mnemonic"},model:{value:e.mnemonic,callback:function(t){e.mnemonic=t},expression:"mnemonic"}}),e._v(" "),n("v-btn",{attrs:{loading:e.isConnecting},on:{click:function(t){return e.connect()}}},[e._v("Init Wallet")]),e._v("\n  Balance:\n  "),n("v-chip",[e._v(e._s(e.walletBalance))]),e._v(" "),n("v-text-field",{attrs:{label:"Pledge Amount"},model:{value:e.pledgeAmount,callback:function(t){e.pledgeAmount=t},expression:"pledgeAmount"}}),e._v(" "),n("v-btn",{attrs:{loading:e.isCreatingDenom},on:{click:function(t){return e.createPledgeDenom()}}},[e._v("Create pledge denomination")]),e._v(" "),n("v-textarea",{attrs:{label:"pledge from transaction"},model:{value:e.pledgeFromTransaction,callback:function(t){e.pledgeFromTransaction=t},expression:"pledgeFromTransaction"}}),e._v(" "),n("v-text-field",{attrs:{label:"pledge from transaction id"},model:{value:e.pledgeFromTransactionId,callback:function(t){e.pledgeFromTransactionId=t},expression:"pledgeFromTransactionId"}})],1)}),[],!1,null,null,null);t.a=component.exports;h()(component,{VBtn:T.a,VCard:_.a,VCardTitle:w.a,VChip:y.a,VTextField:I.a,VTextarea:S.a})},1521:function(e,t,n){"use strict";n.r(t);var r=n(1470).a,o=n(117),c=n(160),l=n.n(c),d=n(1522),m=n(1460),v=n(1473),f=n(1518),x=n(1519),h=n(1479),T=n(1520),_=n(161),w=n(1511),y=n(1517),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",{staticClass:"mx-auto",attrs:{cols:"10",border:"primary"}},[n("v-alert",{staticClass:"mx-auto"},[n("a",{attrs:{href:"https://github.com/dashameter/sighash_anyonecanpay",target:"_blank"}},[e._v("Read the docs")]),n("br"),e._v("\n        Watch the debug console for thrown errors.\n      ")]),e._v(" "),n("v-card",{staticClass:"mx-auto",attrs:{outlined:"","max-width":"500px"}},[n("v-text-field",{attrs:{label:"Number of inputs",rules:[function(e){return e>0||"At least 1"}]},model:{value:e.inputCount,callback:function(t){e.inputCount=t},expression:"inputCount"}}),e._v(" "),n("v-text-field",{attrs:{label:"Funding goal in duffs"},model:{value:e.goalAmount,callback:function(t){e.goalAmount=t},expression:"goalAmount"}}),e._v(" "),n("v-text-field",{attrs:{label:"Transaction fee"},model:{value:e.feeSatoshis,callback:function(t){e.feeSatoshis=t},expression:"feeSatoshis"}}),e._v(" "),n("v-text-field",{attrs:{label:"Payout Address"},model:{value:e.toAddress,callback:function(t){e.toAddress=t},expression:"toAddress"}})],1),e._v(" "),n("v-divider")],1)],1),e._v(" "),n("v-row",[n("v-sheet",{staticClass:"mx-auto pa-4"},[n("v-row",e._l(parseInt(e.inputCount||1),(function(t,r){return n("v-col",{key:r},[e._v("\n          "+e._s(r)+"\n          "),n("VInput",{key:r,attrs:{vidx:t,initmnemonic:e.initmnemonics[r],"goal-amount":parseInt(e.goalAmount),"to-address":e.toAddress,"fee-satoshis":parseInt(e.feeSatoshis)},on:{setTx:function(t){return e.setTxx(r,t)}}}),e._v(" "),n("v-textarea",{attrs:{label:"0x81 transaction"},model:{value:e.inputs[r],callback:function(t){e.$set(e.inputs,r,t)},expression:"inputs[vidx]"}}),e._v(" "),n("v-btn",{attrs:{label:"add input1"},on:{click:function(t){return e.useTx(r)}}},[e._v("\n            Use this transaction\n          ")]),e._v(" "),n("v-textarea",{attrs:{label:"0x81 input"},model:{value:e.inputsJson[r],callback:function(t){e.$set(e.inputsJson,r,t)},expression:"inputsJson[vidx]"}}),e._v(" "),n("v-btn",{attrs:{label:"add input1"},on:{click:function(t){return e.addInputDirect(r)}}},[e._v("\n            Add Input from memory\n          ")]),e._v(" "),n("v-textarea",{attrs:{label:"0x81 input hex"},model:{value:e.inputsHex[r],callback:function(t){e.$set(e.inputsHex,r,t)},expression:"inputsHex[vidx]"}}),e._v("\n          Dashcore.Script.Interpreter().verify(): "),n("br"),e._v(" "),n("strong",[e._v(" "+e._s(e.verifyInput(r)))]),n("br"),e._v(" "),n("v-btn",{attrs:{label:"add input1"},on:{click:function(t){return e.addInputHex(r)}}},[e._v("\n            Add Input from Hex\n          ")])],1)})),1),e._v(" "),n("v-divider"),e._v("\n      Output:\n      "),n("v-divider"),e._v("\n      Dashcore.Script.Interpreter().verify(): "),n("br"),e._v(" "),n("strong",[e._v(" "+e._s(e.verifyRedeemTxOutput()))]),n("br"),e._v("\n      transaction.isFullySigned(): "),n("br"),e._v(" "),n("strong",[e._v(" "+e._s(e.isRedeemTxFullySigned()))]),n("br"),e._v("\n      Redeem Tx with combined Inputs:\n      "),n("v-textarea",{attrs:{value:e.redeemTx,label:"Redeem Tx"}}),e._v(" "),n("v-btn",{on:{click:function(t){return e.broadcastRedeemTx()}}},[e._v(" broadcast Redeem Tx ")]),e._v(" "),n("v-alert",[e._v("\n        Redeem Result:"),n("br"),e._v("\n        "+e._s(e.redeemResult)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAlert:d.a,VBtn:m.a,VCard:v.a,VCol:f.a,VDivider:x.a,VInput:h.a,VRow:T.a,VSheet:_.a,VTextField:w.a,VTextarea:y.a})}}]);